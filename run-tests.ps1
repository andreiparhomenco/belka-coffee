# ============================================
# Belka Coffee - Test Runner Script
# Description: Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
# Created: 2025-12-18
# ============================================

param(
    [string]$Filter = "",
    [switch]$Coverage,
    [switch]$Watch
)

Write-Host "ğŸ§ª Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ² Belka Coffee..." -ForegroundColor Cyan
Write-Host ""

# ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ frontend
Set-Location -Path "D:\Cursor\belka\frontend"

Write-Host "ğŸ“‚ Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ: D:\Cursor\belka\frontend" -ForegroundColor Green
Write-Host ""

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ node_modules
if (!(Test-Path "node_modules")) {
    Write-Host "ğŸ“¦ node_modules Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹. Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸..." -ForegroundColor Yellow
    npm install
    Write-Host ""
}

# Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
$command = "npm test"

if ($Filter) {
    $command += " -- $Filter"
    Write-Host "ğŸ” Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€: $Filter" -ForegroundColor Yellow
}

if ($Coverage) {
    $command += " -- --coverage"
    Write-Host "ğŸ“Š Ğ¡ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸ĞµĞ¼ ĞºĞ¾Ğ´Ğ°" -ForegroundColor Yellow
}

if ($Watch) {
    $command += " -- --watch"
    Write-Host "ğŸ‘€ Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ½Ğ°Ğ±Ğ»ÑĞ´ĞµĞ½Ğ¸Ñ" -ForegroundColor Yellow
}

Write-Host ""
Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" -ForegroundColor Gray
Write-Host ""

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²
Invoke-Expression $command

Write-Host ""
Write-Host "âœ… Ğ¢ĞµÑÑ‚Ñ‹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ñ‹!" -ForegroundColor Green
Write-Host ""

# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
Write-Host "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" -ForegroundColor Gray
Write-Host "ğŸ“š ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:" -ForegroundColor Cyan
Write-Host ""
Write-Host "  # Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹:" -ForegroundColor Gray
Write-Host "  .\run-tests.ps1" -ForegroundColor White
Write-Host ""
Write-Host "  # ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚:" -ForegroundColor Gray
Write-Host "  .\run-tests.ps1 -Filter 'Dashboard'" -ForegroundColor White
Write-Host ""
Write-Host "  # Ğ¡ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸ĞµĞ¼:" -ForegroundColor Gray
Write-Host "  .\run-tests.ps1 -Coverage" -ForegroundColor White
Write-Host ""
Write-Host "  # Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ½Ğ°Ğ±Ğ»ÑĞ´ĞµĞ½Ğ¸Ñ:" -ForegroundColor Gray
Write-Host "  .\run-tests.ps1 -Watch" -ForegroundColor White
Write-Host ""

