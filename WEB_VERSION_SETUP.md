# üåê –ù–ê–°–¢–†–û–ô–ö–ê –í–ï–ë-–í–ï–†–°–ò–ò BELKA COFFEE

**–î–∞—Ç–∞:** 18 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** MVP 1.0 (–±–µ–∑ Telegram)

---

## üìã –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨

### ‚ùå –£–±—Ä–∞–ª–∏:
- ‚ùå Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- ‚ùå Telegram Bot
- ‚ùå `telegram_id` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Å–Ω–æ–≤–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚ùå `BOT_TOKEN` –∏–∑ `.env`

### ‚úÖ –î–æ–±–∞–≤–∏–ª–∏:
- ‚úÖ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è email/password –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Supabase Auth –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –ö—Ä–∞—Å–∏–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Login
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

---

## üîê –¢–ï–°–¢–û–í–´–ï –ê–ö–ö–ê–£–ù–¢–´

### üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:
```
Email: admin@belka.coffee
–ü–∞—Ä–æ–ª—å: BelkaAdmin2024
```

### ‚òï –ë–∞—Ä–∏—Å—Ç–∞:
```
Email: barista@belka.coffee
–ü–∞—Ä–æ–ª—å: BelkaBarista2024
```

---

## üöÄ –ó–ê–ü–£–°–ö –ü–†–û–ï–ö–¢–ê

### 1Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

–û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –≤ Supabase:
```
https://supabase.com/dashboard/project/jcrjcglfzrhcghiqfltp/editor
```

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –æ—á–µ—Ä–µ–¥–∏:

```sql
-- 101_add_email_auth.sql
-- (–î–æ–±–∞–≤–ª—è–µ—Ç email –∫–æ–ª–æ–Ω–∫—É –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç RLS)
```

```sql
-- 102_create_test_users.sql
-- (–°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
```

### 2Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Supabase Auth

–û—Ç–∫—Ä–æ–π—Ç–µ Authentication –≤ Supabase:
```
https://supabase.com/dashboard/project/jcrjcglfzrhcghiqfltp/auth/users
```

–ù–∞–∂–º–∏—Ç–µ **"Add user"** ‚Üí **"Create new user"**

#### –ê–¥–º–∏–Ω:
```
Email: admin@belka.coffee
Password: BelkaAdmin2024
‚òëÔ∏è Auto Confirm User
```

#### –ë–∞—Ä–∏—Å—Ç–∞:
```
Email: barista@belka.coffee
Password: BelkaBarista2024
‚òëÔ∏è Auto Confirm User
```

### 3Ô∏è‚É£ –°–≤—è–∑–∞—Ç—å Auth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ç–∞–±–ª–∏—Ü–µ–π users

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±–Ω–æ–≤–∏—Ç–µ –∏—Ö UUID –≤ —Ç–∞–±–ª–∏—Ü–µ users:

```sql
-- –ü–æ–ª—É—á–∏—Ç—å UUID —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT id, email FROM auth.users;

-- –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –∞–¥–º–∏–Ω–∞
UPDATE users 
SET id = '–ü–û–õ–£–ß–ï–ù–ù–´–ô_UUID_–ê–î–ú–ò–ù–ê'
WHERE email = 'admin@belka.coffee';

-- –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –±–∞—Ä–∏—Å—Ç–∞
UPDATE users 
SET id = '–ü–û–õ–£–ß–ï–ù–ù–´–ô_UUID_–ë–ê–†–ò–°–¢–ê'
WHERE email = 'barista@belka.coffee';
```

### 4Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```powershell
cd D:\Cursor\belka\frontend
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:5174**

### 5Ô∏è‚É£ –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Login:
- –ù–∞–∂–º–∏—Ç–µ **"üë®‚Äçüíº –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω"** –∏–ª–∏ **"‚òï –í–æ–π—Ç–∏ –∫–∞–∫ –±–∞—Ä–∏—Å—Ç–∞"**
- –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ email/–ø–∞—Ä–æ–ª—å –≤—Ä—É—á–Ω—É—é
- –ù–∞–∂–º–∏—Ç–µ **"–í–æ–π—Ç–∏"**

---

## üìÅ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´

### Backend / Database:
```
supabase/migrations/101_add_email_auth.sql      ‚ú® NEW
supabase/migrations/102_create_test_users.sql   ‚ú® NEW
```

### Frontend:
```
frontend/src/lib/auth.ts                        üîÑ UPDATED (email/password –≤–º–µ—Å—Ç–æ Telegram)
frontend/src/App.tsx                            üîÑ UPDATED (—É–±—Ä–∞–ª–∏ Telegram, –¥–æ–±–∞–≤–∏–ª–∏ Login)
frontend/src/components/Login.tsx               ‚ú® NEW
frontend/src/components/Login.css               ‚ú® NEW
frontend/.env                                   üîÑ UPDATED (—É–±—Ä–∞–ª–∏ BOT_TOKEN)
```

---

## üéØ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢

### ‚úÖ –î–ª—è –±–∞—Ä–∏—Å—Ç–∞:
- ‚úÖ –í—Ö–æ–¥ –ø–æ email/password
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –£–∫–∞–∑–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ (–∫–∞–ª–µ–Ω–¥–∞—Ä—å)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≥—Ä–∞—Ñ–∏–∫–∞ —Å–º–µ–Ω
- ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –î–ª—è –∞–¥–º–∏–Ω–∞:
- ‚úÖ –í—Å—ë —Ç–æ –∂–µ —á—Ç–æ —É –±–∞—Ä–∏—Å—Ç–∞, –ø–ª—é—Å:
- ‚úÖ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Dashboard)
- ‚úÖ –û–±–∑–æ—Ä –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –±–∞—Ä–∏—Å—Ç–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ —Å–º–µ–Ω
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä —Å–º–µ–Ω
- ‚úÖ –û—Ç—á—ë—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
- **Supabase Auth** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
- **JWT tokens** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **Row Level Security (RLS)** –¥–ª—è –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö
- **localStorage** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –∫–ª–∏–µ–Ω—Ç–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è Supabase Auth
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç `auth.jwt()->>'email'`
- –ù–∏–∫–∞–∫–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- –õ–æ–≥–∞—É—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç —Å–µ—Å—Å–∏—é

---

## üöÄ –î–ï–ü–õ–û–ô –ù–ê VERCEL

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Vercel –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram!

```powershell
cd D:\Cursor\belka\frontend
vercel --prod
```

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—Ç–µ URL —Ç–∏–ø–∞:
```
https://belka-coffee.vercel.app
```

–ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –î–ª—è Production:
1. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è (Supabase –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏)
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –¥–ª—è Vercel –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –î–ª—è Development:
1. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
2. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –±–∞—Ä–∏—Å—Ç–∞
3. ‚úÖ –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –º–∞–≥–∞–∑–∏–Ω—ã –≤ `shop_template`
4. ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ø–µ—Ä–≤—ã–π –≥—Ä–∞—Ñ–∏–∫

---

## üÜò TROUBLESHOOTING

### –û—à–∏–±–∫–∞ "Invalid login credentials":
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –≤ Supabase Auth
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ email –∏ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ "Auto Confirm User" –±—ã–ª –≤–∫–ª—é—á—ë–Ω

### –û—à–∏–±–∫–∞ "–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω":
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–ø–∏—Å—å –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ `users`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `id` –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å UUID –∏–∑ `auth.users`
- ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```powershell
cd D:\Cursor\belka\frontend
npm install
npm run dev
```

---

## ‚úÖ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç Telegram! üéâ

**–û—Ç–∫—Ä–æ–π—Ç–µ:** http://localhost:5174  
**–í–æ–π–¥–∏—Ç–µ –∫–∞–∫:** admin@belka.coffee  
**–ò –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å!** üöÄ

